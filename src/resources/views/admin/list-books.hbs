<div class="container" style="margin-top: 30px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>Qu·∫£n l√Ω s√°ch</h2>
        <a href="/admin/add" class="nav-btn signup" style="text-decoration: none;">+ Th√™m s√°ch m·ªõi</a>
    </div>

    {{#if errorMessage}}
    <div class="alert alert-danger"
        style="color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb; padding: 12px; border-radius: 4px; margin-bottom: 20px;">
        {{errorMessage}}
    </div>
    {{/if}}

    <table class="table"
        style="width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 0 10px rgba(0,0,0,0.1);">
        <thead>
            <tr style="background-color: #333; color: white; text-align: left;">
                <th style="padding: 15px;">ID</th>
                <th style="padding: 15px;">H√¨nh ·∫£nh</th>
                <th style="padding: 15px;">Ti√™u ƒë·ªÅ</th>
                <th style="padding: 15px;">T√°c gi·∫£</th>
                <th style="padding: 15px;">Danh m·ª•c</th>
                <th style="padding: 15px;">Tr·∫°ng th√°i</th>
                <th style="padding: 15px;">Thao t√°c</th>
            </tr>
        </thead>
        <tbody>
            {{#each books}}
            <tr
                style="{{#if this.is_deleted}}opacity: 0.6; background-color: #f9f9f9;{{/if}} border-bottom: 1px solid #eee;">
                <td style="padding: 15px;">{{this.id}}</td>
                <td style="padding: 15px;">
                    <img src="/img/{{this.image_url}}"
                        style="width: 50px; height: 70px; object-fit: cover; border-radius: 4px; filter: {{#if this.is_deleted}}grayscale(100%){{/if}};">
                </td>
                <td style="padding: 15px; font-weight: 500;">{{this.title}}</td>
                <td style="padding: 15px;">{{this.author}}</td>

                <td>
                    {{#if this.category_name}}
                    <span class="badge bg-info"
                        style="background-color: #17a2b8; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                        {{this.category_name}}
                    </span>
                    {{else}}
                    <span class="text-muted">Ch∆∞a ph√¢n lo·∫°i</span>
                    {{/if}}
                </td>

                <td style="padding: 15px;">
                    {{#if this.is_deleted}}
                    <span style="color: #e74c3c; font-weight: bold;">üö´ Ng·ª´ng ph·ª•c v·ª•</span>
                    {{else}}
                    <span style="color: #27ae60; font-weight: bold;">‚úÖ ƒêang kinh doanh</span>
                    {{/if}}
                </td>

                <td style="padding: 15px;">
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <a href="/admin/edit/{{this.id}}"
                            style="color: #ff9800; text-decoration: none; font-size: 18px;">‚úèÔ∏è</a>

                        {{#if this.is_deleted}}
                        <form action="/admin/books/restore/{{this.id}}" method="POST" style="margin: 0;">
                            <button type="submit" title="Hi·ªán l·∫°i s√°ch"
                                onclick="return confirm('B·∫°n mu·ªën hi·ªÉn th·ªã l·∫°i s√°ch n√†y?')"
                                style="background: none; border: none; cursor: pointer; color: #27ae60; font-size: 18px;">
                                ‚úÖ
                            </button>
                        </form>
                        {{else}}
                        <form action="/admin/books/stop/{{this.id}}" method="POST" style="margin: 0;">
                            <button type="submit" title="Ng·ª´ng ph·ª•c v·ª•"
                                onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ·∫©n s√°ch n√†y?')"
                                style="background: none; border: none; cursor: pointer; color: #e74c3c; font-size: 18px;">
                                üö´
                            </button>
                        </form>
                        {{/if}}

                        <form action="/admin/books/delete/{{this.id}}" method="POST" style="margin: 0;">
                            <button type="submit" title="X√≥a vƒ©nh vi·ªÖn"
                                onclick="return confirm('X√≥a vƒ©nh vi·ªÖn? ƒêi·ªÅu ki·ªán: S√°ch ch∆∞a c√≥ ng∆∞·ªùi ƒë·ªçc/b√¨nh lu·∫≠n.')"
                                style="background: none; border: none; cursor: pointer; color: #333; font-size: 18px;">
                                üóëÔ∏è
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>